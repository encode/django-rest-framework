[tox]
envlist =
       {py310}-{django42,django51,django52}
       {py311}-{django42,django51,django52}
       {py312}-{django42,django51,django52,django60,djangomain}
       {py313}-{django51,django52,django60,djangomain}
       {py314}-{django52,django60,djangomain}
       base
       dist
       docs

[testenv]
commands = python -W error::DeprecationWarning -W error::PendingDeprecationWarning runtests.py --coverage {posargs}
envdir = {toxworkdir}/venvs/{envname}
setenv =
       PYTHONDONTWRITEBYTECODE=1
       PYTHONWARNINGS=once
dependency_groups =
       test
       optional
       django42: django42
       django50: django50
       django51: django51
       django52: django52
       django60: django60
       djangomain: djangomain

[testenv:base]
; Ensure optional dependencies are not required
dependency_groups =
       test
deps =

[testenv:dist]
commands = python -W error::DeprecationWarning -W error::PendingDeprecationWarning runtests.py --no-pkgroot --staticfiles {posargs}
dependency_groups =
       test
       optional

[testenv:docs]
skip_install = true
commands =
       mkdocs build
dependency_groups =
       test
       docs

[testenv:py312-djangomain]
ignore_outcome = true

[testenv:py313-djangomain]
ignore_outcome = true

[testenv:py314-djangomain]
ignore_outcome = true
